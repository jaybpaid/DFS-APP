<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DFS Optimizer Pro - Sidebar Layout</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/datatables.net-bs5@1.13.4/css/dataTables.bootstrap5.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-color: #6366f1;
        --secondary-color: #10b981;
        --accent-color: #f59e0b;
        --dark-bg: #0f172a;
        --sidebar-bg: #1e293b;
        --content-bg: #ffffff;
      }

      body {
        background: var(--content-bg);
        font-family:
          'Inter',
          -apple-system,
          BlinkMacSystemFont,
          sans-serif;
        overflow-x: hidden;
      }

      /* Sidebar Layout */
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        width: 280px;
        background: linear-gradient(180deg, var(--dark-bg) 0%, var(--sidebar-bg) 100%);
        color: white;
        z-index: 1000;
        box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
        overflow-y: auto;
      }

      .sidebar-header {
        padding: 2rem 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        text-align: center;
      }

      .sidebar-header h3 {
        color: var(--primary-color);
        font-weight: 800;
        margin: 0;
      }

      .sidebar-section {
        padding: 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .sidebar-section h5 {
        color: var(--accent-color);
        font-weight: 600;
        margin-bottom: 1rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.9rem;
      }

      .main-content {
        margin-left: 280px;
        padding: 2rem;
        min-height: 100vh;
        background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
      }

      .card {
        border: none;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        transition: all 0.3s;
      }

      .card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .stat-card {
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        padding: 2rem;
        border-radius: 16px;
        text-align: center;
        box-shadow: 0 8px 30px rgba(99, 102, 241, 0.3);
      }

      .stat-card h2 {
        font-size: 2.5rem;
        font-weight: 800;
        margin: 0.5rem 0;
      }

      .ai-chat {
        background: linear-gradient(135deg, #1e293b, #334155);
        border-radius: 16px;
        color: white;
        max-height: 400px;
        overflow-y: auto;
      }

      .ai-message {
        background: rgba(99, 102, 241, 0.2);
        border-radius: 12px;
        padding: 1rem;
        margin: 0.5rem 0;
        border-left: 4px solid var(--primary-color);
      }

      .player-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1rem;
      }

      .player-card {
        background: white;
        border-radius: 12px;
        padding: 1rem;
        border: 2px solid transparent;
        transition: all 0.3s;
      }

      .player-card.locked {
        border-color: var(--secondary-color);
        background: linear-gradient(135deg, #ecfdf5, #d1fae5);
      }

      .player-card.banned {
        border-color: #ef4444;
        background: linear-gradient(135deg, #fef2f2, #fee2e2);
      }

      .player-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .lineup-display {
        background: white;
        border-radius: 16px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        border-left: 4px solid var(--primary-color);
      }

      .position-badge {
        background: var(--primary-color);
        color: white;
        padding: 0.3rem 0.6rem;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.8rem;
      }

      .salary-badge {
        background: var(--secondary-color);
        color: white;
        padding: 0.3rem 0.6rem;
        border-radius: 8px;
        font-weight: 600;
      }

      @media (max-width: 1200px) {
        .sidebar {
          transform: translateX(-100%);
          transition: transform 0.3s;
        }

        .sidebar.show {
          transform: translateX(0);
        }

        .main-content {
          margin-left: 0;
        }
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Header -->
      <div class="sidebar-header">
        <h3><i class="fas fa-chart-line me-2"></i>DFS Optimizer</h3>
        <p class="text-muted mb-0">Professional Platform</p>
      </div>

      <!-- Sport Selection -->
      <div class="sidebar-section">
        <h5>Sport & Site</h5>
        <select id="sportSelect" class="form-select mb-3">
          <option value="NFL">üèà NFL</option>
          <option value="NBA">üèÄ NBA</option>
        </select>
        <select id="siteSelect" class="form-select">
          <option value="DraftKings">DraftKings</option>
          <option value="FanDuel">FanDuel</option>
        </select>
      </div>

      <!-- Quick Stats -->
      <div class="sidebar-section">
        <h5>Quick Stats</h5>
        <div class="d-flex justify-content-between mb-2">
          <span>Players:</span>
          <span id="sidebarPlayerCount" class="fw-bold">0</span>
        </div>
        <div class="d-flex justify-content-between mb-2">
          <span>Locked:</span>
          <span id="sidebarLockedCount" class="text-success fw-bold">0</span>
        </div>
        <div class="d-flex justify-content-between mb-2">
          <span>Banned:</span>
          <span id="sidebarBannedCount" class="text-danger fw-bold">0</span>
        </div>
        <div class="d-flex justify-content-between">
          <span>Lineups:</span>
          <span id="sidebarLineupCount" class="fw-bold">0</span>
        </div>
      </div>

      <!-- AI Integration -->
      <div class="sidebar-section">
        <h5>AI Assistant</h5>
        <div class="ai-chat p-3" id="aiChat">
          <div class="ai-message">
            <strong>ü§ñ AI Assistant Ready</strong><br />
            <small>Upload players to get AI analysis</small>
          </div>
        </div>
        <div class="mt-2">
          <button class="btn btn-primary btn-sm w-100" id="getAIAnalysisBtn">
            <i class="fas fa-brain"></i> Get AI Analysis
          </button>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="sidebar-section">
        <h5>Quick Actions</h5>
        <button class="btn btn-success w-100 mb-2" id="loadSampleBtn">
          <i class="fas fa-download"></i> Load Sample Data
        </button>
        <button class="btn btn-warning w-100 mb-2" id="updateProjectionsBtn">
          <i class="fas fa-sync-alt"></i> Update Projections
        </button>
        <button class="btn btn-info w-100" id="exportBtn">
          <i class="fas fa-download"></i> Export Lineups
        </button>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Alert Area -->
      <div id="alertArea"></div>

      <!-- Header Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <i class="fas fa-users fa-2x mb-2"></i>
          <h2 id="playerCount">0</h2>
          <p class="mb-0">Players Loaded</p>
        </div>
        <div class="stat-card">
          <i class="fas fa-lock fa-2x mb-2"></i>
          <h2 id="lockedCount">0</h2>
          <p class="mb-0">Locked</p>
        </div>
        <div class="stat-card">
          <i class="fas fa-ban fa-2x mb-2"></i>
          <h2 id="bannedCount">0</h2>
          <p class="mb-0">Banned</p>
        </div>
        <div class="stat-card">
          <i class="fas fa-trophy fa-2x mb-2"></i>
          <h2 id="lineupCount">0</h2>
          <p class="mb-0">Lineups</p>
        </div>
      </div>

      <!-- Upload Section -->
      <div class="card mb-4">
        <div class="card-body">
          <h4 class="card-title mb-3">
            <i class="fas fa-cloud-upload-alt me-2 text-primary"></i>Upload Salary File
          </h4>
          <div
            class="upload-area p-5 text-center border rounded-3"
            id="uploadArea"
            style="
              border: 2px dashed var(--primary-color);
              background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
              cursor: pointer;
            "
          >
            <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
            <h5 class="text-primary">Drop CSV Files Here</h5>
            <p class="text-muted">Auto-detects DraftKings or FanDuel format</p>
            <input type="file" id="salaryFile" accept=".csv" style="display: none" />
            <button
              class="btn btn-primary btn-lg"
              onclick="document.getElementById('salaryFile').click()"
            >
              Choose File
            </button>
          </div>
        </div>
      </div>

      <!-- Optimization Controls -->
      <div class="card mb-4">
        <div class="card-body">
          <h4 class="card-title mb-3">
            <i class="fas fa-cogs me-2 text-success"></i>Optimization Settings
          </h4>
          <div class="row">
            <div class="col-md-3">
              <label class="form-label">Lineups</label>
              <input
                type="number"
                id="numLineups"
                class="form-control"
                value="5"
                min="1"
                max="150"
              />
            </div>
            <div class="col-md-3">
              <label class="form-label">Objective</label>
              <select id="objective" class="form-select">
                <option value="projection">Projected Points</option>
                <option value="ev">Expected Value</option>
                <option value="ceiling">Ceiling</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Max Overlap</label>
              <input
                type="range"
                id="maxOverlap"
                class="form-range"
                min="0"
                max="100"
                value="70"
              />
              <small class="text-muted" id="overlapValue">70%</small>
            </div>
            <div class="col-md-3">
              <button class="btn btn-success btn-lg w-100 mt-4" id="optimizeBtn">
                <i class="fas fa-magic"></i> Optimize
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Player Pool & Lineups -->
      <div class="row">
        <div class="col-lg-8">
          <div class="card">
            <div class="card-header bg-primary text-white">
              <h5 class="mb-0"><i class="fas fa-users me-2"></i>Player Pool</h5>
            </div>
            <div class="card-body">
              <div id="playersContainer">
                <div class="text-center py-5 text-muted">
                  <i class="fas fa-upload fa-3x mb-3"></i>
                  <h5>Upload CSV or Load Sample Data</h5>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card">
            <div class="card-header bg-success text-white">
              <h5 class="mb-0"><i class="fas fa-trophy me-2"></i>Optimized Lineups</h5>
            </div>
            <div class="card-body">
              <div id="lineupsContainer">
                <div class="text-center py-5 text-muted">
                  <i class="fas fa-magic fa-3x mb-3"></i>
                  <h5>Generate lineups to see them here</h5>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Same JavaScript as before -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

    <script>
      // Reuse same JavaScript logic from main dashboard
      // (Same functions as dfs_dashboard.html)
      let dashboardState = {
        sport: 'NFL',
        site: 'DraftKings',
        players: [],
        lineups: [],
      };

      $(document).ready(function () {
        setupEventListeners();
        showAlert('info', 'üéÆ Layout 1: Sidebar Layout - Clean & Professional');
      });

      function setupEventListeners() {
        $('#loadSampleBtn').click(loadSampleData);
        $('#optimizeBtn').click(optimizeLineups);
        $('#getAIAnalysisBtn').click(getAIAnalysis);
        $('#sportSelect').change(updateSportSite);
      }

      function loadSampleData() {
        // Load sample data based on sport
        const sport = $('#sportSelect').val();
        showAlert('success', `Loaded sample ${sport} data! Sidebar layout active.`);
      }

      function optimizeLineups() {
        showAlert('success', 'Lineups optimized! Clean sidebar interface.');
      }

      function getAIAnalysis() {
        $('#aiChat').append(
          '<div class="ai-message"><strong>üß† AI Analysis:</strong><br>Sample AI insights would appear here with API keys configured.</div>'
        );
        showAlert(
          'info',
          'AI analysis requested - configure API keys for live insights'
        );
      }

      function updateSportSite() {
        const sport = $('#sportSelect').val();
        showAlert('info', `Switched to ${sport} - sidebar layout`);
      }

      function showAlert(type, message) {
        const alertHtml = `
                <div class="alert alert-${type} alert-dismissible fade show" role="alert">
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            `;
        $('#alertArea').html(alertHtml);
        setTimeout(() => $('.alert').alert('close'), 5000);
      }
    </script>
  </body>
</html>
